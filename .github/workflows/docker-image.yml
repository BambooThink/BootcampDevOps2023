name: Construir y subir imagen de Docker

on:
  push:
    branches:
      - main  # Reemplaza "main" con el nombre de tu rama principal si es diferente

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Verificar código
      uses: actions/checkout@v2

    - name: Configurar directorio de trabajo
      run: cd ./Ejercicios/Prueba_GitHub_Actions/api-rest

    - name: Iniciar Docker
      run: docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}
      # Asegúrate de configurar las variables de entorno DOCKER_USERNAME y DOCKER_PASSWORD en la configuración de tu repositorio.

    - name: Construir imagen de Docker
      run: docker build -t orpimel/prueba:v2.0.0 .

    - name: Subir imagen a Docker Hub
      run: docker push orpimel/prueba:v2.0.0
